steps:

- id: build&push
  name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args:
  - '-c'
  - |
    docker build -t us-east1-docker.pkg.dev/qwiklabs-gcp-00-5c3666b81a8d/react-app-00001-t6k/react-app:latest .
    docker push us-east1-docker.pkg.dev/qwiklabs-gcp-00-5c3666b81a8d/react-app-00001-t6k/react-app:latest



- id: deploy
  name: 'gcr.io/cloud-builders/gcloud'
  entrypoint: sh
  args:
  - '-c'
  - |

      gcloud run deploy react-app \
      --region=us-east1 \
      --allow-unauthenticated \
      --image us-east1-docker.pkg.dev/qwiklabs-gcp-00-5c3666b81a8d/react-app-00001-t6k/react-app:latest



options:
  logging: CLOUD_LOGGING_ONLY 
